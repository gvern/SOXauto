dataset_id: CR_04
version: 2
description: GL Account Balance at Date - Balance sheet view from Anaplan import with IFRS mapping and currency split
source_system: NAV
primary_keys: ["id_company", "closing_date", "group_coa_account_no"]
deprecated: false

fields:
  - name: id_company
    required: true
    aliases: ["ID_COMPANY", "id_company", "ID_Company"]
    dtype: string
    semantic_tag: id
    description: Company identifier
    reconciliation_critical: true
    coercion_rules:
      strip_whitespace: true
  
  - name: company_name
    required: false
    aliases: ["COMPANY_NAME", "company_name", "Company Name"]
    dtype: string
    semantic_tag: name
    description: Company display name
    reconciliation_critical: false
  
  - name: country_code
    required: false
    aliases: ["COUNTRY_CODE", "country_code", "Country Code"]
    dtype: string
    semantic_tag: code
    description: Country code for the entity
    reconciliation_critical: false
  
  - name: country_name
    required: false
    aliases: ["COUNTRY_NAME", "country_name", "Country Name"]
    dtype: string
    semantic_tag: name
    description: Country display name
    reconciliation_critical: false
  
  - name: closing_date
    required: true
    aliases: ["CLOSING_DATE", "closing_date", "Closing Date"]
    dtype: datetime64
    semantic_tag: date
    description: Balance sheet closing date
    reconciliation_critical: true
    coercion_rules:
      strip_whitespace: true
      date_formats: ["%Y-%m-%d", "%d/%m/%Y", "%m/%d/%Y", "%Y%m%d"]
  
  - name: refresh_date
    required: false
    aliases: ["REFRESH_DATE", "refresh_date", "Refresh Date"]
    dtype: datetime64
    semantic_tag: date
    description: Data refresh timestamp
    reconciliation_critical: false
    coercion_rules:
      strip_whitespace: true
      date_formats: ["%Y-%m-%d %H:%M:%S", "%Y-%m-%d"]
  
  - name: group_coa_account_no
    required: true
    aliases: ["GROUP_COA_ACCOUNT_NO", "group_coa_account_no", "Group COA Account No"]
    dtype: string
    semantic_tag: code
    description: Grouped chart of accounts number
    reconciliation_critical: true
    coercion_rules:
      strip_whitespace: true
  
  - name: group_coa_account_name
    required: false
    aliases: ["GROUP_COA_ACCOUNT_NAME", "group_coa_account_name", "Group COA Account Name"]
    dtype: string
    semantic_tag: name
    description: Grouped chart of accounts display name
    reconciliation_critical: false
  
  - name: real_coa
    required: false
    aliases: ["REAL_COA", "real_coa", "Real COA"]
    dtype: string
    semantic_tag: code
    description: Real chart of accounts reference
    reconciliation_critical: false
  
  - name: currency
    required: false
    aliases: ["CURRENCY", "currency", "Currency"]
    dtype: string
    semantic_tag: code
    description: Currency code
    reconciliation_critical: false
  
  - name: fx_rate
    required: false
    aliases: ["FX_RATE", "fx_rate", "FX Rate"]
    dtype: float64
    semantic_tag: rate
    description: Foreign exchange rate
    reconciliation_critical: false
    fill_policy: keep_nan
    coercion_rules:
      strip_whitespace: true
      remove_commas: true
      remove_spaces: true
      remove_currency_symbols: false
    validation_rules:
      allow_negative: false
  
  - name: balance_at_date
    required: true
    aliases: ["BALANCE_AT_DATE", "balance_at_date", "Balance At Date", "Balance", "Amount"]
    dtype: float64
    semantic_tag: amount
    description: Account balance at cutoff date
    reconciliation_critical: true
    fill_policy: keep_nan
    coercion_rules:
      strip_whitespace: true
      remove_commas: true
      remove_spaces: true
      remove_currency_symbols: true
    validation_rules:
      allow_negative: true
  
  - name: busline_code
    required: false
    aliases: ["BUSLINE_CODE", "busline_code", "Business Line Code", "BL Code"]
    dtype: string
    semantic_tag: code
    description: Business line classification code
    reconciliation_critical: false
  
  - name: reporting_country_code
    required: false
    aliases: ["REPORTING_COUNTRY_CODE", "reporting_country_code", "Reporting Country Code"]
    dtype: string
    semantic_tag: code
    description: Reporting country code
    reconciliation_critical: false
  
  - name: reporting_country_name
    required: false
    aliases: ["REPORTING_COUNTRY_NAME", "reporting_country_name", "Reporting Country Name"]
    dtype: string
    semantic_tag: name
    description: Reporting country display name
    reconciliation_critical: false
  
  - name: partner_code
    required: false
    aliases: ["PARTNER_CODE", "partner_code", "Partner Code"]
    dtype: string
    semantic_tag: code
    description: Business partner code
    reconciliation_critical: false
  
  - name: ic_partner_code
    required: false
    aliases: ["IC_PARTNER_CODE", "ic_partner_code", "IC Partner Code", "Intercompany Partner"]
    dtype: string
    semantic_tag: code
    description: Intercompany partner code
    reconciliation_critical: false
  
  - name: is_recharge
    required: false
    aliases: ["IS_RECHARGE", "is_recharge", "Is Recharge"]
    dtype: int64
    semantic_tag: code
    description: Recharge flag
    reconciliation_critical: false
  
  - name: is_retained_earnings
    required: false
    aliases: ["IS_RETAINED_EARNINGS", "is_retained_earnings", "Is Retained Earnings"]
    dtype: int64
    semantic_tag: code
    description: Retained earnings flag
    reconciliation_critical: false
  
  - name: conso_account_no
    required: false
    aliases: ["CONSO_ACCOUNT_NO", "conso_account_no", "Conso Account No"]
    dtype: string
    semantic_tag: code
    description: Consolidation account number
    reconciliation_critical: false
  
  - name: conso_account_name
    required: false
    aliases: ["CONSO_ACCOUNT_NAME", "conso_account_name", "Conso Account Name"]
    dtype: string
    semantic_tag: name
    description: Consolidation account display name
    reconciliation_critical: false
  
  - name: ifrs_level_1_name
    required: false
    aliases: ["IFRS_LEVEL_1_NAME", "ifrs_level_1_name", "IFRS Level 1"]
    dtype: string
    semantic_tag: code
    description: IFRS reporting level 1 classification
    reconciliation_critical: false
  
  - name: ifrs_level_2_name
    required: false
    aliases: ["IFRS_LEVEL_2_NAME", "ifrs_level_2_name", "IFRS Level 2"]
    dtype: string
    semantic_tag: code
    description: IFRS reporting level 2 classification
    reconciliation_critical: false
  
  - name: ifrs_level_3_name
    required: false
    aliases: ["IFRS_LEVEL_3_NAME", "ifrs_level_3_name", "IFRS Level 3"]
    dtype: string
    semantic_tag: code
    description: IFRS reporting level 3 classification
    reconciliation_critical: false
  
  - name: is_interco
    required: false
    aliases: ["IS_INTERCO", "is_interco", "Is Interco", "Intercompany"]
    dtype: int64
    semantic_tag: code
    description: Intercompany flag
    reconciliation_critical: false
